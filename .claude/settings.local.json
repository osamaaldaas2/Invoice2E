{
  "permissions": {
    "allow": [
      "Bash(npx tsc:*)",
      "Bash(npm run dev:*)",
      "Bash(timeout:*)",
      "Bash(ping:*)",
      "Bash(find:*)",
      "Bash(taskkill:*)",
      "Bash(netstat:*)",
      "Bash(findstr:*)",
      "Bash(powershell -Command \"if \\(Test-Path ''c:\\\\Users\\\\osama\\\\Desktop\\\\Invoice2E.1\\\\nul''\\) { Remove-Item -Force ''c:\\\\Users\\\\osama\\\\Desktop\\\\Invoice2E.1\\\\nul''; Write-Host ''File deleted'' } else { Write-Host ''File not found'' }\")",
      "Bash(curl:*)",
      "Bash(npx vitest run:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfix: batch download XML generation, tax rate normalization, country code extraction, and batch history feature\n\n- Fix ZIP batch download returning only conversion_report \\(no XML files\\) by generating XML on-the-fly from extraction data\n- Fix History download failing on missing country codes \\(BR-09, BR-11\\) by adding sellerCountryCode/buyerCountryCode to extraction prompt, types, and fallback defaults\n- Fix AI extracting tax rate as 0.19 or 18.69 by clarifying prompt format, removing AI calculation instruction, and adding normalization in all adapters\n- Fix filename collision in ZIP downloads causing only 1 invoice to appear\n- Add batch uploads to History page with expandable rows, ZIP download, and individual invoice download\n- Deduplicate batch-owned extractions from individual history entries\n\nCo-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git branch:*)",
      "Bash(git checkout:*)",
      "Bash(git push:*)",
      "Bash(git commit:*)",
      "Bash(dir:*)",
      "Bash(wc:*)",
      "Bash(npm test:*)",
      "Bash(test:*)",
      "Bash(ls -la \"C:\\\\Users\\\\osama\\\\Desktop\\\\Invoice2E.1\\\\app\\\\[locale]\\\\dashboard\"\" | grep -E \"page)",
      "Bash(layout)",
      "Bash(error)",
      "Bash(loading \")",
      "Bash(grep:*)",
      "Bash(ls:*)",
      "Bash(node -e:*)",
      "mcp__chrome-devtools__navigate_page",
      "mcp__chrome-devtools__take_snapshot",
      "mcp__chrome-devtools__click",
      "mcp__chrome-devtools__wait_for",
      "mcp__chrome-devtools__take_screenshot",
      "mcp__chrome-devtools__fill",
      "mcp__chrome-devtools__list_pages",
      "mcp__chrome-devtools__list_console_messages",
      "mcp__chrome-devtools__list_network_requests",
      "Bash(git -C \"C:\\\\Users\\\\osama\\\\Desktop\\\\Invoice2E.1\" status --short)",
      "Bash(git -C \"C:\\\\Users\\\\osama\\\\Desktop\\\\Invoice2E.1\" diff --name-status HEAD)",
      "mcp__chrome-devtools__fill_form",
      "mcp__chrome-devtools__evaluate_script",
      "mcp__chrome-devtools__emulate",
      "mcp__chrome-devtools__upload_file",
      "mcp__chrome-devtools__handle_dialog",
      "Bash(git status:*)",
      "Bash(npm audit:*)",
      "Bash(python3:*)",
      "Bash(xargs -I {} bash -c 'echo \"\"=== {} ===\"\" && head -30 {}')",
      "Bash(git rm:*)",
      "Bash(npm update:*)",
      "Bash(npm install:*)",
      "Bash(npx husky init:*)",
      "WebSearch",
      "WebFetch(domain:nuextract.ai)",
      "WebFetch(domain:github.com)",
      "Bash(npx eslint:*)",
      "Bash(npm ls:*)",
      "Bash(npx next dev)",
      "mcp__chrome-devtools__get_network_request",
      "Bash(cd:*)",
      "Bash(if not exist \"c:\\\\Users\\\\osama\\\\Desktop\\\\Invoice2E.1\\\\validation\" mkdir \"c:\\\\Users\\\\osama\\\\Desktop\\\\Invoice2E.1\\\\validation\")",
      "Bash(npx vitest:*)",
      "Bash(git stash:*)",
      "Bash(java -version:*)",
      "Bash(Get-Process -Name node -ErrorAction SilentlyContinue)",
      "Bash(Where-Object { $_CommandLine -like \"*next dev*\" })",
      "Bash(Stop-Process -Force)",
      "Bash(/tmp/test_stripe_body.js << 'EOF'\n// Test to demonstrate the fix\nconst URLSearchParams = require\\('url'\\).URLSearchParams;\n\nconsole.log\\(\"=== BEFORE FIX \\(Simulated\\) ===\"\\);\nconst bodyBefore = new URLSearchParams\\(\\);\nbodyBefore.append\\('mode', 'payment'\\);\nbodyBefore.append\\('line_items[0][quantity]', '1'\\);\nbodyBefore.append\\('line_items[0][quantity]', '1'\\); // DUPLICATE\nconsole.log\\(bodyBefore.toString\\(\\)\\);\nconst matchesBefore = bodyBefore.toString\\(\\).match\\(/line_items%5B0%5D%5Bquantity%5D=1/g\\);\nconsole.log\\('Quantity parameter count:', matchesBefore ? matchesBefore.length : 0\\);\n\nconsole.log\\(\"\\\\n=== AFTER FIX ===\"\\);\nconst bodyAfter = new URLSearchParams\\(\\);\nbodyAfter.append\\('mode', 'payment'\\);\nbodyAfter.append\\('line_items[0][quantity]', '1'\\); // FIXED - only one\nconsole.log\\(bodyAfter.toString\\(\\)\\);\nconst matchesAfter = bodyAfter.toString\\(\\).match\\(/line_items%5B0%5D%5Bquantity%5D=1/g\\);\nconsole.log\\('Quantity parameter count:', matchesAfter ? matchesAfter.length : 0\\);\nEOF)",
      "Bash(node:*)",
      "Bash(tail:*)",
      "Bash(npm run lint:*)",
      "Bash(echo:*)",
      "Bash(npm run build:*)",
      "mcp__claude_ai_Supabase__list_projects",
      "mcp__claude_ai_Supabase__apply_migration",
      "mcp__claude_ai_Supabase__execute_sql",
      "Bash(cmd /c \"mkdir \"\"c:\\\\Users\\\\osama\\\\Desktop\\\\Invoice2E.1\\\\.claude\\\\skills\"\" 2>nul && echo created || echo exists\")",
      "Bash(cmd /c \"cd /d \"\"c:\\\\Users\\\\osama\\\\Desktop\\\\Invoice2E.1\"\" && mkdir \"\".claude\\\\skills\"\" 2>nul & echo done\")",
      "Bash(cmd /c \"dir \"\"c:\\\\Users\\\\osama\\\\Desktop\\\\Invoice2E.1\\\\.claude\"\"\")",
      "Bash(powershell -Command \"New-Item -ItemType Directory -Force -Path ''c:\\\\Users\\\\osama\\\\Desktop\\\\Invoice2E.1\\\\.claude\\\\skills'' | Out-Null; Write-Host ''done''\")",
      "Bash(powershell -Command:*)",
      "Bash(npx next build:*)",
      "Bash(NEXT_TELEMETRY_DISABLED=1 npx next build:*)",
      "Bash(npx supabase db push:*)",
      "Bash(tee:*)",
      "Bash(gh pr list:*)",
      "Bash(gh pr view:*)",
      "Bash(gh api:*)",
      "Bash(gh repo view:*)",
      "Bash(TERM=dumb cat:*)"
    ]
  }
}
